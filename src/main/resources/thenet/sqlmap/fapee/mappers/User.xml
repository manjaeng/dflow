<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.thenet.fapee.user.service.impl.UserMapper">
	
	<select id="selectUserServiceInfo" resultType="FP_User" parameterType="string">
		SELECT  idKey
		      , userId
		      , password
		      , userType
		      , userName
		      , mobileNumber
		      , email
		      , loginTotalCount
		      , loginFailCount
		      , lastLoginDate
		      , loginIp
		      , snsType
		      , snsId
		      , status
		  FROM FP_User
		 WHERE idKey <![CDATA[ > ]]> 0
		<if test="_parameter != null">
		   AND userId = #{_parameter}
		</if>
	</select>
	
	<update id="updateUserServiceFailCount">
		UPDATE FP_User
		   SET loginFailCount=loginFailCount+1
		 WHERE idKey=#{_parameter}
	</update>
	
	<update id="updateUserServiceInfo" parameterType="FP_User">
		UPDATE FP_User
		   SET loginFailCount=0,
		       lastLoginDate=#{lastLoginDate},
		       loginTotalCount=#{loginTotalCount},
		       loginIp=#{loginIp}
		 WHERE idKey=#{idKey}
	</update>
	
	<select id="selectUserServiceList" resultType="FP_User">
		SELECT *
		  FROM FP_User
	</select>
	
</mapper>