<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.thenet.fapee.user.service.impl.UserMapper">
	
	<select id="selectUserServiceList" resultType="CM_User">
		SELECT *
		  FROM CM_User
	</select>
	
	<select id="selectUserServiceInfo" resultType="CM_User" parameterType="string">
		SELECT idKey       , userId, password, userType, userName,
			   mobileNumber, email , snsType , snsId   , status
		  FROM CM_User
		 WHERE idKey <![CDATA[ > ]]> 0
		<if test="_parameter != null">
		   AND userId = #{_parameter}
		</if>
	</select>
	
	<select id="selectUserServiceSumupInfo" resultType="CM_UserSumup" parameterType="long">
		SELECT userIdKey   , loginFailCount, lastLoginDate, rewardPoint, userLevel,
			   lastLoginSeq
		  FROM CM_UserSumup
		 WHERE userIdKey <![CDATA[ > ]]> 0
		<if test="_parameter != null">
		   AND userIdKey = #{_parameter}
		</if>
	</select>
	
	<update id="updateUserServiceSumupInfo" parameterType="CM_UserSumup" >
		UPDATE CM_UserSumup
		   SET loginFailCount=#{loginFailCount},
			   lastLoginDate=#{lastLoginDate},
			   rewardPoint=#{rewardPoint},
			   userLevel=#{userLevel},
			   lastLoginSeq=#{lastLoginSeq}
		 WHERE userIdKey=#{userIdKey}
	</update>
	
</mapper>