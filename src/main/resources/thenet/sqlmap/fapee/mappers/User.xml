<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.thenet.fapee.user.service.impl.UserMapper">
	
	<select id="selectUserList" resultType="FP_User">
		SELECT *
		  FROM fp_user
	</select>
	
	<select id="selectUserInfo" resultType="FP_User" parameterType="egovMap">
		SELECT idKey
		      ,userId
		      ,password
		      ,userType
		      ,mobile
		      ,email
		      ,lastLoginDate
		      ,joinDate
		      ,snsType
		      ,snsId
		      ,deviceId
		      ,status
		  FROM fp_user
		 WHERE 1 = 1
	 	<if test='idKey != null'>
	 		AND idKey = #{idKey}
	 	</if>
	 	<if test='userId != null'>
	 		AND userId = #{userId}
	 	</if>
	 	<if test='password != null'>
	 		AND password = #{password}
	 	</if>
	 	<if test='mobile != null'>
	 		AND mobile = #{mobile}
	 	</if>
	</select>
	
	<insert id="insertUserInfo" parameterType="FP_User" useGeneratedKeys="true" keyProperty="idKey">
		INSERT into fp_user(
			 userId
			,password
			,userType
			,mobile
			,email
			,joinDate
			,deviceId
			,status
		) VALUES (
			 #{userId}
			,#{password}
			,#{userType}
			,#{mobile}
			,#{email}
			,now()
			,#{deviceId}
			,#{status}
		)
	</insert>
	
	<insert id="insertUserFilterInfo" parameterType="egovMap" useGeneratedKeys="true" keyProperty="idKey">
		INSERT into fp_user_filter(
			 deviceId
			,gender
			,country
		) VALUES (
			 #{deviceId}
			,#{gender}
			,#{country}
		)
	</insert>
	
	<insert id="insertUserStyleList" parameterType="egovMap">
		INSERT into fp_style_choose(
			 styleIdKey
			,userFilterIdKey
		) VALUES 
		<foreach collection="styleArray" item="item" index="i" separator=",">
			(#{item},#{userFilterIdKey})
       	</foreach>
		
	</insert>
	
</mapper>